!function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t(require("file-saver"),require("prop-types"),require("react"),require("xlsx")):"function"==typeof define&&define.amd?define("react-table",["file-saver","prop-types","react","xlsx"],t):"object"==typeof exports?exports["react-table"]=t(require("file-saver"),require("prop-types"),require("react"),require("xlsx")):e["react-table"]=t(e["file-saver"],e["prop-types"],e.react,e.xlsx)}(this,function(e,t,n,r){return function(e){function t(r){if(n[r])return n[r].exports;var a=n[r]={i:r,l:!1,exports:{}};return e[r].call(a.exports,a,a.exports,t),a.l=!0,a.exports}var n={};return t.m=e,t.c=n,t.i=function(e){return e},t.d=function(e,n,r){t.o(e,n)||Object.defineProperty(e,n,{configurable:!1,enumerable:!0,get:r})},t.n=function(e){var n=e&&e.__esModule?function(){return e.default}:function(){return e};return t.d(n,"a",n),n},t.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},t.p="",t(t.s=5)}([function(e,t,n){function r(e){if(Array.isArray(e))return b(e.constructor(e.length),e);if("Map"===g(e))return new Map(e);if("Set"===g(e))return new Set(e);if(e&&"object"==typeof e){var t=Object.getPrototypeOf(e);return b(Object.create(t),e)}return e}function a(){function e(n,a){"function"==typeof a&&(a={$apply:a}),Array.isArray(n)&&Array.isArray(a)||d(!Array.isArray(a),"update(): You provided an invalid spec to update(). The spec may not contain an array except as the value of $set, $push, $unshift, $splice or any custom command allowing an array value."),d("object"==typeof a&&null!==a,"update(): You provided an invalid spec to update(). The spec and every included key path must be plain objects containing one of the following commands: %s.",Object.keys(t).join(", "));var o=n;return v(a).forEach(function(l){if(h.call(t,l)){var s=n===o;o=t[l](a[l],o,a,n),s&&e.isEquals(o,n)&&(o=n)}else{var i="Map"===g(n)?e(n.get(l),a[l]):e(n[l],a[l]),u="Map"===g(o)?o.get(l):o[l];e.isEquals(i,u)&&(void 0!==i||h.call(n,l))||(o===n&&(o=r(n)),"Map"===g(o)?o.set(l,i):o[l]=i)}}),o}var t=b({},E);return e.extend=function(e,n){t[e]=n},e.isEquals=function(e,t){return e===t},e}function o(e,t,n){d(Array.isArray(e),"update(): expected target of %s to be an array; got %s.",n,e),l(t[n],n)}function l(e,t){d(Array.isArray(e),"update(): expected spec of %s to be an array; got %s. Did you forget to wrap your parameter in an array?",t,e)}function s(e,t){d(Array.isArray(e),"Expected $splice target to be an array; got %s",e),i(t.$splice)}function i(e){d(Array.isArray(e),"update(): expected spec of $splice to be an array of arrays; got %s. Did you forget to wrap your parameters in an array?",e)}function u(e){d("function"==typeof e,"update(): expected spec of $apply to be a function; got %s.",e)}function c(e){d(1===Object.keys(e).length,"Cannot have more than one key in an object with $set")}function p(e,t){d(t&&"object"==typeof t,"update(): $merge expects a spec of type 'object'; got %s",t),d(e&&"object"==typeof e,"update(): $merge expects a target of type 'object'; got %s",e)}function f(e,t){var n=g(e);d("Map"===n||"Set"===n,"update(): %s expects a target of type Set or Map; got %s",t,n)}var d=n(6),h=Object.prototype.hasOwnProperty,m=Array.prototype.splice,y=Object.prototype.toString,g=function(e){return y.call(e).slice(8,-1)},b=Object.assign||function(e,t){return v(t).forEach(function(n){h.call(t,n)&&(e[n]=t[n])}),e},v="function"==typeof Object.getOwnPropertySymbols?function(e){return Object.keys(e).concat(Object.getOwnPropertySymbols(e))}:function(e){return Object.keys(e)},E={$push:function(e,t,n){return o(t,n,"$push"),e.length?t.concat(e):t},$unshift:function(e,t,n){return o(t,n,"$unshift"),e.length?e.concat(t):t},$splice:function(e,t,n,a){return s(t,n),e.forEach(function(e){i(e),t===a&&e.length&&(t=r(a)),m.apply(t,e)}),t},$set:function(e,t,n){return c(n),e},$toggle:function(e,t){l(e,"$toggle");var n=e.length?r(t):t;return e.forEach(function(e){n[e]=!t[e]}),n},$unset:function(e,t,n,a){return l(e,"$unset"),e.forEach(function(e){Object.hasOwnProperty.call(t,e)&&(t===a&&(t=r(a)),delete t[e])}),t},$add:function(e,t,n,a){return f(t,"$add"),l(e,"$add"),"Map"===g(t)?e.forEach(function(e){var n=e[0],o=e[1];t===a&&t.get(n)!==o&&(t=r(a)),t.set(n,o)}):e.forEach(function(e){t!==a||t.has(e)||(t=r(a)),t.add(e)}),t},$remove:function(e,t,n,a){return f(t,"$remove"),l(e,"$remove"),e.forEach(function(e){t===a&&t.has(e)&&(t=r(a)),t.delete(e)}),t},$merge:function(e,t,n,a){return p(t,e),v(e).forEach(function(n){e[n]!==t[n]&&(t===a&&(t=r(a)),t[n]=e[n])}),t},$apply:function(e,t){return u(e),e(t)}},x=a();e.exports=x,e.exports.default=x,e.exports.newContext=a},function(t,n){t.exports=e},function(e,n){e.exports=t},function(e,t){e.exports=n},function(e,t){e.exports=r},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function a(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function l(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function s(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var i=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},u=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),c=n(3),p=r(c),f=n(2),d=r(f),h=n(4),m=r(h),y=n(1),g=r(y),b=n(0),v=r(b),E=function(e){function t(e){o(this,t);var n=l(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return x.call(n),n}return s(t,e),u(t,[{key:"render",value:function(){var e=this;return p.default.createElement("div",{className:"smpl-table"},this.state.rows.length&&!this.state.collapsed&&this.props.excelExport?p.default.createElement("p",{className:"excel-export"},p.default.createElement("a",{href:"#",onClick:this.toExcel},"Export to excel")):null,p.default.createElement("table",{className:this.props.className},this.state.collapsed?p.default.createElement("thead",{className:"pointer",onClick:function(t){return e.setState({collapsed:!1})}},p.default.createElement("tr",null,p.default.createElement("th",null,this.state.collapsed))):null,this.state.collapsed?null:p.default.createElement(w,{selected:this.state.selected,applyGlobal:this.applyGlobal,isSelectable:this.props.isMassEditable||this.props.isSelectable,isFilterable:this.props.isFilterable,isMassEditable:this.props.isMassEditable,sort:this.sort,columns:this.state.columns,filter:this.filter}),!this.state.collapsed&&p.default.createElement("tbody",null,this.state.rows&&this.applyFilters().map(function(t,n){return p.default.createElement(_,{key:"row-"+(t[e.state.primaryKey]||n),id:t[e.state.primaryKey]||n,index:n,columns:e.state.columns,row:t,onChange:e.change,onRowUpdate:e.onRowUpdate,isSelectable:e.props.isMassEditable||e.props.isSelectable,selectClass:e.props.rowSelectClass,hasRowUpdate:!!e.props.onRowUpdate,updateOnBlur:e.props.updateOnBlur})}),!this.state.rows.length&&p.default.createElement("tr",null,p.default.createElement("td",{className:"align-center",colSpan:this.props.columns.length},"No rows could be found"))),!this.state.collapsed&&p.default.createElement(q,null)),this.props.onSubmit?p.default.createElement("button",{type:"button",disabled:this.state.submitDisabled,onClick:function(t){return e.props.onSubmit(e.state.rows)&&e.props.disableOnSubmit&&e.setState({submitDisabled:!0})}},this.props.buttonSubmitText||"Submit"," ",this.props.submitDisabled&&p.default.createElement("i",{className:"fa fa-spinner fa-spin"})):null)}}]),t}(p.default.Component);E.propTypes={columns:d.default.arrayOf(d.default.object),rows:d.default.array.isRequired,onRowChange:d.default.func,onSubmit:d.default.func,className:d.default.string,excelExport:d.default.any,collapsed:d.default.any,isFilterable:d.default.bool,isMassEditable:d.default.bool,updateOnBlur:d.default.bool,primary:d.default.string},E._s2ab=function(e){for(var t=new Uint8Array(new ArrayBuffer(e.length)),n=0;n!=e.length;++n)t[n]=255&e.charCodeAt(n);return t};var x=function(){var e=this;this.state={columns:this.props.columns,rows:this.props.rows,sortColumn:null,collapsed:this.props.collapsed||!1,selected:0,primary:this.props.primary},this.componentWillReceiveProps=function(t){var n=t.columns;!n&&t.rows&&(n=Object.keys(t.rows[0]).map(function(e){return{name:e,field:e}}));var r=t.primary||n.find(function(e){return e.isPrimary});e.setState({columns:n,rows:t.rows,primaryKey:r?r.field||r:null})},this.sort=function(t,n){n.preventDefault();var r=e.state.rows;r=t==e.state.sortColumn?r.reverse():t instanceof Array?r.sort(function(e,n){var r=t.reduce(function(e,t){return e[t]},e),a=t.reduce(function(e,t){return e[t]},n);return r>a?1:a>r?-1:0}):r.sort(function(e,n){return(e[t]&&e[t]instanceof String&&e[t].replace(/-/g,"")||e[t])>(n[t]&&n[t]instanceof String&&n[t].replace(/-/g,"")||n[t])?1:(n[t]&&n[t]instanceof String&&n[t].replace(/-/g,"")||n[t])>(e[t]&&e[t]instanceof String&&e[t].replace(/-/g,"")||e[t])?-1:0}),e.setState({rows:r,sortColumn:t}),n.preventDefault()},this.change=function(t,n){var r=e.state.rows,a=e.state.selected;console.log("Changing index",t),r[t]=Object.assign(r[t],n),r[t].delta=Object.assign({},r[t].delta,n),r[t].delta.selected&&delete r[t].delta.selected,void 0!==n.selected&&(a+=n.selected?1:-1);var o=Date.now();e.setState({rows:(0,v.default)(e.state.rows,{index:{$set:r[t]}}),selected:a},function(){return console.log("Updated index",(Date.now()-o)/1e3)}),console.log("Edited Row",t,r[t])},this.onRowUpdate=function(t){t.delta&&e.props.onRowUpdate&&e.props.onRowUpdate(t)},this.toExcel=function(t){var n=e.state.rows.map(function(t){return e.state.columns.reduce(function(e,n){return n.ignore||(n.field instanceof Array?e[n.name]=n.field.reduce(function(e,t){return e[t]},t):n.field instanceof Function?e[n.name]=n.field(t):e[n.name]=t[n.field]),e},{})}),r=m.default.utils.json_to_sheet(n),a=m.default.utils.book_new();m.default.utils.book_append_sheet(a,r);var o=m.default.write(a,{bookType:"xlsx",bookSST:!1,type:"binary"});g.default.saveAs(new Blob([E._s2ab(o)],{type:"application/octet-stream"}),e.props.excelExport||"Untitled Report.xlsx"),t.preventDefault()},this.filter=function(t,n){var r=e.state.columns;r[t].filter=n,e.setState({columns:r})},this.applyFilters=function(t){var n=e.state.columns.filter(function(e){return e.filter});return n.length?e.state.rows.filter(function(e){return n.every(function(t){return String(e[t.field]).toLowerCase().indexOf(t.filter.toLowerCase())>=0})}):e.state.rows},this.matchesFilters=function(t){var n=e.state.columns.filter(function(e){return e.filter});return n.length&&n.every(function(e){return String(t[e.field]).indexOf(e.filter)>=0})||!0},this.applyGlobal=function(t){e.applyFilters().map(function(n,r){return(void 0!==t.selected||n.selected)&&e.change(r,t)})}};t.default=E;var w=function(e){function t(e){o(this,t);var n=l(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.state={edits:{}},n._filterTimer=null,n.applyFilter=function(e,t){clearTimeout(n._filterTimer),n._filterTimer=setTimeout(n.props.filter(e,t),200)},n.queueEdit=function(e,t){var r=n.state.edits;r[e]=t,n.setState({edits:r})},n.applyEdits=function(){n.props.applyGlobal(n.state.edits)},n}return s(t,e),u(t,[{key:"render",value:function(){var e=this;return this.props.columns?p.default.createElement("thead",null,this.props.isMassEditable&&p.default.createElement("tr",{className:"smpl-table-edit"},this.props.isSelectable&&p.default.createElement("td",{className:"align-center"},p.default.createElement("button",{className:"button-success",disabled:!this.props.selected||0==Object.keys(this.state.edits).length,type:"button",onClick:this.applyEdits},p.default.createElement("i",{className:"fa fa-check"}))),this.props.columns.map(function(t,n){return p.default.createElement(k,i({key:"change-"+t.name,index:n},t,{queueEdit:e.queueEdit}))})),p.default.createElement("tr",null,this.props.isSelectable&&p.default.createElement("th",{className:"align-center",key:"selected"},p.default.createElement("input",{type:"checkbox",defaultValue:!1,onChange:function(t){return e.props.applyGlobal({selected:t.target.checked})}})),this.props.columns.map(function(t,n){return p.default.createElement(O,i({key:"header-"+t.name,index:n},t,{sort:e.props.sort,applyFilter:e.applyFilter,applyGlobal:e.props.applyGlobal}))})),this.props.isFilterable&&p.default.createElement("tr",{className:"smpl-table-filter"},this.props.isSelectable&&p.default.createElement("td",null," "),this.props.columns.map(function(t,n){return 0==t.isFilterable?p.default.createElement("td",{style:t.style,key:"filter-"+t.field}," "):p.default.createElement(C,i({key:"filter-"+t.field,index:n},t,{sort:e.props.sort,applyFilter:e.applyFilter}))}))):null}}]),t}(p.default.Component),O=function(e){function t(e){o(this,t);var n=l(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.state={filter:!1},n}return s(t,e),u(t,[{key:"render",value:function(){var e=this;return p.default.createElement("th",{style:this.props.style},!this.props.name&&this.props.checkbox?p.default.createElement("input",{type:"checkbox",defaultValue:!1,onChange:function(t){return e.props.applyGlobal(a({},e.props.field,t.target.checked))}}):null,this.props.checkbox||!1===this.props.isSortable?this.props.name:p.default.createElement("a",{href:"#",onClick:function(t){return e.props.sort(e.props.field,t)}},this.props.name))}}]),t}(p.default.Component),C=function(e){return p.default.createElement("td",{style:e.style},e.checkbox&&p.default.createElement("input",{type:"checkbox",name:e.field,onChange:function(t){return e.applyFilter(e.field,t.target.checked)}}),e.choices&&p.default.createElement("select",{className:"u-full-width",onChange:function(t){return e.applyFilter(e.field,t.target.value)}},p.default.createElement("option",null),e.choices.map(function(t,n){return p.default.createElement("option",{key:"change-"+e.name+"-"+n,value:t.value},t.name)})),!e.choices&&!e.checkbox&&p.default.createElement("input",{className:"smpl-filter",type:"text",name:e.field,onChange:function(t){return e.applyFilter(e.index,t.target.value)}}))},k=function(e){return p.default.createElement("td",{style:e.style},e.checkbox&&p.default.createElement("input",{type:"checkbox",name:e.field,onChange:function(t){return e.queueEdit(e.field,t.target.checked)}}),e.choices&&p.default.createElement("select",{className:"u-full-width",onChange:function(t){return e.queueEdit(e.field,t.target.value)}},p.default.createElement("option",null),e.choices.map(function(t,n){return p.default.createElement("option",{key:"change-"+e.name+"-"+n,value:t.value},t.name)})),!e.checkbox&&!e.choices&&e.isEditable&&p.default.createElement("input",{type:"text",name:e.field,onChange:function(t){return e.queueEdit(e.field,t.target.value)}}))},_=function(e){function t(e){o(this,t);var n=l(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return j.call(n),n.state=e.row||null,n}return s(t,e),u(t,[{key:"render",value:function(){var e=this;return this.props.row&&this.props.columns?p.default.createElement("tr",{className:this.state.selectedVisual&&this.props.selectClass||"",onClick:function(t){return"INPUT"!=t.target.nodeName&&e.setState({selectedVisual:!e.state.selectedVisual})}},this.props.isSelectable&&p.default.createElement("td",{className:"align-center"},p.default.createElement("input",{type:"checkbox",checked:this.state.selected,onChange:function(t){return e.props.onChange(e.props.index,{selected:t.target.checked})}})),this.props.columns.map(function(t){var n=t.field instanceof Array?t.field.reduce(function(e,t){return e[t]},e.state):e.state[t.field];n=(t.formatters||[]).reduce(function(t,n){return n(e.props.row)},n);var r=t.alt&&t.alt(e.props.row);return t.isEditable?t.choices?p.default.createElement(N,{updateOnBlur:e.props.updateOnBlur,key:e.props.id+"-"+t.field,id:e.props.id+"-"+t.field,column:t,onChange:e.onChange,data:n}):t.checkbox?p.default.createElement(B,{updateOnBlur:e.props.updateOnBlur,key:e.props.id+"-"+t.field,id:e.props.id+"-"+t.field,column:t,onChange:e.onChange,data:n}):p.default.createElement($,{updateOnBlur:e.props.updateOnBlur,key:e.props.id+"-"+t.field,id:e.props.id+"-"+t.field,column:t,data:n,onChange:e.onChange,title:r}):p.default.createElement(S,{updateOnBlur:e.props.updateOnBlur,key:e.props.id+"-"+t.field,id:e.props.id+"-"+t.field,column:t,data:n,row:e.props.row,title:r})}),this.props.hasRowUpdate&&this.props.row.delta?p.default.createElement("td",{className:"vertical-align-middle",style:{borderBottom:0}},p.default.createElement("button",{type:"button",className:"button-success margin-bottom-none"},"✔")):null):null}}]),t}(p.default.Component),j=function(){var e=this;this.shouldComponentUpdate=function(e){return!1},this.componentWillReceiveProps=function(t){t.row&&t.row.delta&&t.index==e.props.index&&(e.setState(t.row),e.forceUpdate())},this.onRowUpdate=function(e){},this.onChange=function(t,n){e.props.onChange(e.props.index,a({},t.field,n))}},S=function(e){function t(e){o(this,t);var n=l(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.render=function(){return p.default.createElement("td",{style:n.props.column.style,title:n.props.title||""},n.props.data)},n}return s(t,e),t}(p.default.Component),$=function(e){function t(e){o(this,t);var n=l(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return P.call(n),n}return s(t,e),t}(p.default.Component),P=function(){var e=this;this.state={value:this.props.data},this.onLocalChange=function(t){console.log("local change"),e.setState({value:t.target.value})},this.onChange=function(t){console.log("global change"),e.props.onChange(e.props.column,t.target.value)},this.componentWillReceiveProps=function(t){e.props.data!=t.data&&e.setState({value:t.data})},this.render=function(){return p.default.createElement("td",{style:e.props.column.style,title:e.props.title},p.default.createElement("input",{className:"u-full-width",type:"text",title:e.props.title,value:e.state.value,onChange:e.props.updateOnBlur?e.onLocalChange:e.onChange,onBlur:e.props.updateOnBlur?e.onChange:null}))}},N=function(e){function t(e){o(this,t);var n=l(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return A.call(n),n}return s(t,e),t}(p.default.Component),A=function(){var e=this;this.state={value:this.props.data},this.onLocalChange=function(t){console.log("local change"),e.setState({value:t.target.value})},this.onChange=function(t){console.log("global change"),e.props.onChange(e.props.column,t.target.value)},this.componentWillReceiveProps=function(t){e.props.data!=t.data&&e.setState({value:t.data})},this.render=function(){return p.default.createElement("td",{style:e.props.column.style},p.default.createElement("select",{className:"u-full-width",value:e.state.value,onChange:e.props.updateOnBlur?e.onLocalChange:e.onChange,onBlur:e.props.updateOnBlur?e.onChange:null},e.props.column.choices.map(function(t){return p.default.createElement("option",{key:e.props.id+"-"+t.value,value:t.value},t.name)})))}},B=function(e){function t(e){o(this,t);var n=l(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return R.call(n),n}return s(t,e),t}(p.default.Component),R=function(){var e=this;this.state={value:this.props.data},this.componentWillReceiveProps=function(t){e.props.data!=t.data&&e.setState({value:t.data})},this.onLocalChange=function(t){console.log("local change"),e.setState({value:t.target.checked})},this.onChange=function(t){console.log("global change"),e.props.onChange(e.props.column,t.target.checked)},this.render=function(){return p.default.createElement("td",{style:e.props.column.style},p.default.createElement("input",{type:"checkbox",checked:e.state.value,onChange:e.props.updateOnBlur?e.onLocalChange:e.onChange,onBlur:e.props.updateOnBlur?e.onChange:null}))}},q=function(e){function t(e){o(this,t);var n=l(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.render=function(){return p.default.createElement("tfoot",null,p.default.createElement("tr",null))},n}return s(t,e),t}(p.default.Component);e.exports=t.default},function(e,t,n){"use strict";var r=function(e,t,n,r,a,o,l,s){if(!e){var i;if(void 0===t)i=new Error("Minified exception occurred; use the non-minified dev environment for the full error message and additional helpful warnings.");else{var u=[n,r,a,o,l,s],c=0;i=new Error(t.replace(/%s/g,function(){return u[c++]})),i.name="Invariant Violation"}throw i.framesToPop=1,i}};e.exports=r}])});
//# sourceMappingURL=react-table.min.js.map